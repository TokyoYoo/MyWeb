<!-- views/checkpoint.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - Apologize</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5311761039714075"
  crossorigin="anonymous"></script> 


  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- AOS Animation Library -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

  <!-- Linkvertise API -->
  <script src="https://publisher.linkvertise.com/cdn/linkvertise.js"></script>
  <script>
    const linkvertiseId = '<%= locals.linkvertiseId || "" %>';
    linkvertise(linkvertiseId, {whitelist: [], blacklist: [""]});
  </script>
  <style>
    body {
      background: linear-gradient(135deg, #1a103c, #2e1065, #3c096c);
      font-family: 'Kanit', sans-serif;
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      min-height: 100vh;
    }
    
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .glass {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      border-radius: 2rem;
      padding: 2.5rem;
      box-shadow: 
        0 12px 30px rgba(0, 0, 0, 0.3),
        inset 0 1px 2px rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      overflow: hidden;
      position: relative;
    }
    
    .glass::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      transform: rotate(30deg);
      pointer-events: none;
    }

    .progress-bar {
      position: relative;
      overflow: hidden;
      height: 12px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.15);
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .progress-bar .progress {
      transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
      background: linear-gradient(90deg, #8a2be2, #ff69b4);
      box-shadow: 0 0 15px rgba(138, 43, 226, 0.6);
      border-radius: 20px;
      height: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, #8a2be2, #ff69b4);
      color: white;
      padding: 0.9rem 2.5rem;
      border-radius: 9999px;
      font-weight: bold;
      box-shadow: 0 10px 25px rgba(138, 43, 226, 0.4);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.2), transparent);
      transition: all 0.5s;
      z-index: -1;
    }

    .btn-primary:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 20px 30px rgba(138, 43, 226, 0.6);
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-home {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 0.7rem 1.8rem;
      border-radius: 9999px;
      font-weight: 600;
      color: #fff;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-home:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .btn-home svg {
      transition: transform 0.3s ease;
    }
    
    .btn-home:hover svg {
      transform: translateX(-3px);
    }

    .progress.width-1 { width: 33.33%; }
    .progress.width-2 { width: 66.66%; }
    .progress.width-3 { width: 100%; }
    
    .checkpoint-number {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .checkpoint-active {
      background: rgba(255, 105, 180, 0.9);
      box-shadow: 0 0 20px rgba(255, 105, 180, 0.6);
      color: white;
      font-weight: bold;
    }
    
    .checkpoint-waiting {
      background: rgba(255, 255, 255, 0.15);
      color: rgba(255, 255, 255, 0.6);
    }
    
    .checkpoint-complete {
      background: rgba(138, 43, 226, 0.9);
      color: white;
      font-weight: bold;
    }
    
    
    @keyframes float {
      0% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(2deg); }
      100% { transform: translateY(0px) rotate(0deg); }
    }
    
    .profile-image-container {
      animation: float 6s ease-in-out infinite;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
      border-radius: 1rem;
      overflow: hidden;
      position: relative;
    }
    
    .profile-image-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 1rem;
      box-shadow: inset 0 0 0 4px rgba(255, 255, 255, 0.2);
      pointer-events: none;
    }
    
    /* Ad spaces */
    .ad-space {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 1rem;
      margin: 1.5rem 0;
      padding: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px dashed rgba(255, 255, 255, 0.2);
    }
    
    /* Glow effects */
    .glow {
      position: relative;
    }
    
    .glow::after {
      content: '';
      position: absolute;
      top: -30px;
      left: -30px;
      right: -30px;
      bottom: -30px;
      background: radial-gradient(circle at center, rgba(138, 43, 226, 0.4) 0%, transparent 70%);
      filter: blur(40px);
      z-index: -1;
      opacity: 0.8;
    }

    
    .linkvertise-guide {
      background: rgba(255, 255, 255, 0.12);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 2rem;
      border: 2px solid rgba(255, 105, 180, 0.3);
      position: relative;
    }

    .guide-step {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      background: rgba(255, 255, 255, 0.08);
      padding: 0.8rem;
      border-radius: 0.8rem;
    }

    .step-number {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: linear-gradient(135deg, #8a2be2, #ff69b4); 
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .highlight {
      background: linear-gradient(90deg, #8a2be2, #ff69b4);
      padding: 0.2rem 0.5rem;
      border-radius: 0.3rem;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
    }

    .video-container {
      width: 100%;
      border-radius: 0.8rem;
      margin: 1rem 0;
      border: 2px solid rgba(255, 255, 255, 0.15);
      overflow: hidden;
    }

    .video-container video {
      width: 100%;
      display: block;
    }

    .guide-title {
      display: flex;
      align-items: center;
      margin-bottom: 1.2rem;
      font-size: 1.2rem;
      font-weight: bold;
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .tutorial-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(8px);
    }
    
    .modal-content {
      background: rgba(30, 15, 60, 0.95);
      border-radius: 1.5rem;
      padding: 2rem;
      max-width: 90%;
      width: 550px;
      max-height: 90vh;
      overflow-y: auto;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    
    
    .tutorial-button {
      background: linear-gradient(135deg, #ff69b4, #8a2be2);
      color: white;
      padding: 0.7rem 1.2rem;
      border-radius: 9999px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 10px 20px rgba(138, 43, 226, 0.4);
      transition: all 0.3s ease;
      animation: pulse 2s infinite;
      margin-bottom: 1.5rem;
    }
    
    .tutorial-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 25px rgba(138, 43, 226, 0.6);
    }
    
    .income-info {
      background: rgba(255, 105, 180, 0.15);
      border-radius: 0.8rem;
      padding: 1rem;
      margin-top: 1rem;
      border-left: 4px solid #ff69b4;
    }
    
    .countdown-timer {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 999px;
      padding: 2px 10px;
      font-size: 12px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 15px;
    }
    
    .understand-button {
      background: linear-gradient(135deg, #50c878, #00a86b);
      color: white;
      padding: 0.8rem 2rem;
      border-radius: 9999px;
      font-weight: bold;
      margin-top: 1.5rem;
      width: 100%;
      text-align: center;
      box-shadow: 0 10px 20px rgba(80, 200, 120, 0.4);
      transition: all 0.3s ease;
      cursor: not-allowed;
      opacity: 0.7;
    }
    
    .understand-button.active {
      cursor: pointer;
      opacity: 1;
    }
    
    .understand-button.active:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 25px rgba(80, 200, 120, 0.6);
    }
  </style>
</head>
<body class="text-white">
  <div class="min-h-screen flex flex-col justify-center items-center px-4 py-10">
    <header class="mb-8 text-4xl font-bold" data-aos="fade-down" data-aos-duration="800">
      <button onclick="window.location.href='/'" class="btn-home">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5"></path>
          <path d="M12 19l-7-7 7-7"></path>
        </svg>
        Apologize
      </button>
    </header>

    <main class="glass max-w-xl w-full glow" data-aos="zoom-in" data-aos-duration="1000">
      <div class="flex flex-col items-center">
        <% if (mod.image) { %>
          <div class="profile-image-container w-40 h-40 mb-6" data-aos="flip-left" data-aos-delay="400">
            <img src="<%= mod.image %>" alt="<%= mod.name %>" class="w-full h-full object-cover" />
          </div>
        <% } %>

        <h1 class="text-2xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300" data-aos="fade-up" data-aos-delay="300"><%= mod.name %></h1>

        <div class="w-full mb-6" data-aos="fade-up" data-aos-delay="400">
          <div class="progress-bar mb-4">
            <div class="progress <%= 'width-' + checkpoint %>"></div>
          </div>
          <div class="flex justify-between mt-4">
            <div class="flex flex-col items-center">
              <div class="checkpoint-number <%= checkpoint >= 1 ? 'checkpoint-complete' : 'checkpoint-waiting' %>">1</div>
              <span class="text-xs mt-2 <%= checkpoint >= 1 ? 'text-white' : 'text-white/50' %>">Start</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="checkpoint-number <%= checkpoint >= 2 ? 'checkpoint-complete' : (checkpoint == 1 ? 'checkpoint-active' : 'checkpoint-waiting') %>">2</div>
              <span class="text-xs mt-2 <%= checkpoint >= 1 ? 'text-white' : 'text-white/50' %>">Verify</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="checkpoint-number <%= checkpoint >= 3 ? 'checkpoint-complete' : (checkpoint == 2 ? 'checkpoint-active' : 'checkpoint-waiting') %>">3</div>
              <span class="text-xs mt-2 <%= checkpoint >= 2 ? 'text-white' : 'text-white/50' %>">Complete</span>
            </div>
          </div>
        </div>

        
        <% if (checkpoint == 1) { %>
        <button id="openTutorial" class="tutorial-button" data-aos="fade-up" data-aos-delay="500">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 16v-4"></path>
            <path d="M12 8h.01"></path>
          </svg>
          How to Get the Script ‚Äì Read Before Continuing
        </button>
        <% } %>

        <div class="text-center mb-6" data-aos="fade-up" data-aos-delay="500">
          <h2 class="text-2xl font-semibold text-white mb-2">Checkpoint <%= checkpoint %> of 3</h2>
          <p class="text-white/70">Press the "Next" button to go to the next step.</p>
        </div>

        <a href="<%= nextUrl %>" class="btn-primary text-lg" data-aos="fade-up" data-aos-delay="600">
          Next
        </a>
      </div>
    </main>

    <footer class="mt-8 text-sm text-white/60" data-aos="fade-up" data-aos-delay="800">
      &copy; <%= new Date().getFullYear() %> Apologize. All rights reserved.
    </footer>
  </div>


  <% if (checkpoint == 1) { %>
  <div id="tutorialModal" class="tutorial-modal">
    <div class="modal-content">
      <div id="countdownContainer" class="countdown-timer">
        Please wait <span id="countdown">5</span> second
      </div>
      
      <div class="guide-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
        </svg>
        How to get the script
      </div>
      
      <div class="linkvertise-guide">
        <div class="guide-step">
          <div class="step-number">1</div>
          <div>When you click Next, you'll be redirected to the Linkvertise page.</div>
        </div>
        
        <div class="guide-step">
          <div class="step-number">2</div>
          <div>Click the ‚ÄúGet Website‚Äù button.</div>
        </div>
        
        <div class="guide-step">
          <div class="step-number">3</div>
          <div>When the advertisement appears, make sure to click <span class="highlight"> ‚ÄúI'm interested‚Äù</span> </div>
        </div>
        
        <div class="video-container">
          <video controls autoplay loop muted>
            <source src="/videos/linkvertise-guide.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        
        <div class="guide-step pulse">
          <div class="step-number">4</div>
          <div><span class="text-red-400 font-bold">Do not click ‚ÄúSkip‚Äù</span> Why? If you click ‚ÄúSkip,‚Äù the system cannot verify that you've completed all required steps. This may result in the final script link not being unlocked or working properly.</div>
        </div>
        
        <div class="guide-step">
          <div class="step-number">5</div>
          <div>After clicking ‚ÄúI'm interested‚Äù, please wait a moment. You will be redirected to the next step automatically.</div>
        </div>
        
        <div class="income-info">
          <p class="font-semibold mb-2">üíé  Why click ‚ÄúI'm interested‚Äù?</p>
          <p class="text-sm">Clicking ‚ÄúI'm interested‚Äù is an essential part of the process.It tells the system that you‚Äôve genuinely completed the required step. Skipping this may cause the system to deny access to the final content. I just wrote all this for fun. Smart people always skip Right?</p>
        </div>
        
        <button id="understoodButton" class="understand-button">
          Got it!
        </button>
      </div>
    </div>
  </div>
  <% } %>

  <% if (checkpoint == 1) { %>
    <script src="/js/tutorial-modal.js"></script>
    <% } %>
    <script src="/js/particles.js"></script>
</body>
</html>